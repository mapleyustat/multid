#!/bin/sh

prog=tBlockTri2low
out=/tmp/"$prog$$.out"
correct_out=/tmp/"$prog$$correct.out"
abserr=1.e-10

cat > "$correct_out" << "END"
M before:
lower_lower:
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
lower:
0.333333 1
0.5 -0.5
0.25 0.5
0.333333 -0.333333
0.2 0.333333
0.25 -0.25
0.166667 0.25
0.2 -0.2
0.142857 0.2
0.166667 -0.166667
0.125 0.166667
0.142857 -0.142857
0.111111 0.142857
0.125 -0.125
0.1 0.125
0.111111 -0.111111
0.0909091 0.111111
0.1 -0.1
0.0833333 0.1
0.0909091 -0.0909091
0.0769231 0.0909091
0.0833333 -0.0833333
0.0714286 0.0833333
0.0769231 -0.0769231
0.0666667 0.0769231
0.0714286 -0.0714286
0.0625 0.0714286
0.0666667 -0.0666667
0.0588235 0.0666667
0.0625 -0.0625
0.0555556 0.0625
0.0588235 -0.0588235
0.0526316 0.0588235
0.0555556 -0.0555556
0.05 0.0555556
0.0526316 -0.0526316
0.047619 0.0526316
0.05 -0.05
0.0454545 0.05
0.047619 -0.047619
diag:
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
y before:
0 1
1 2
2 3
3 4
4 5
5 6
6 7
7 8
8 9
9 10
10 11
11 12
12 13
13 14
14 15
15 16
16 17
17 18
18 19
19 20
M after:
lower_lower:
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
0.001 -0.001
0.001 0.001
lower:
0.333333 1
0.5 -0.5
0.25 0.5
0.333333 -0.333333
0.2 0.333333
0.25 -0.25
0.166667 0.25
0.2 -0.2
0.142857 0.2
0.166667 -0.166667
0.125 0.166667
0.142857 -0.142857
0.111111 0.142857
0.125 -0.125
0.1 0.125
0.111111 -0.111111
0.0909091 0.111111
0.1 -0.1
0.0833333 0.1
0.0909091 -0.0909091
0.0769231 0.0909091
0.0833333 -0.0833333
0.0714286 0.0833333
0.0769231 -0.0769231
0.0666667 0.0769231
0.0714286 -0.0714286
0.0625 0.0714286
0.0666667 -0.0666667
0.0588235 0.0666667
0.0625 -0.0625
0.0555556 0.0625
0.0588235 -0.0588235
0.0526316 0.0588235
0.0555556 -0.0555556
0.05 0.0555556
0.0526316 -0.0526316
0.047619 0.0526316
0.05 -0.05
0.0454545 0.05
0.047619 -0.047619
diag:
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
-10 1
1 10
y after:
0 1
1 2
2 3
3 4
4 5
5 6
6 7
7 8
8 9
9 10
10 11
11 12
12 13
13 14
14 15
15 16
16 17
17 18
18 19
19 20
x:
0.00990099 0.0990099
-0.0686371 0.211319
-0.15864 0.325185
-0.248667 0.436948
-0.338514 0.547547
-0.428197 0.657569
-0.517755 0.767266
-0.607224 0.876762
-0.696629 0.986127
-0.785985 1.0954
-0.875304 1.2046
-0.964594 1.31376
-1.05386 1.42288
-1.14311 1.53197
-1.23235 1.64103
-1.32157 1.75008
-1.41078 1.85911
-1.49998 1.96812
-1.58918 2.07713
-1.67837 2.18612
M*x:
3.46945e-18 1
1 2
2 3
3 4
4 5
5 6
6 7
7 8
8 9
9 10
10 11
11 12
12 13
13 14
14 15
15 16
16 17
17 18
18 19
19 20
M*x - y_before:
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
0 0
END
"$prog" > "$out"
if ndiff -abserr $abserr "$correct_out" "$out" > /dev/null 2>&1; then
	rm -f "$correct_out" "$out"
	exit 0
fi
exit 1
